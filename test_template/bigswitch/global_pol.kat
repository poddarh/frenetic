filter switch = 3 and port = 1 or switch = 1 and port = 1 or switch = 2 and port = 1 or switch = 0 and port = 1;
(filter switch = 3 and port = 1; (vswitch := 1; vport := 3) +
 filter switch = 1 and port = 1; (vswitch := 1; vport := 1) +
 filter switch = 2 and port = 1; (vswitch := 1; vport := 2) +
 filter switch = 0 and port = 1; (vswitch := 1; vport := 0));
filter vswitch = 1 and vport = 3 or vswitch = 1 and vport = 1 or vswitch = 1 and vport = 2 or vswitch = 1 and vport = 0;
((filter ethDst = 00:00:00:00:03:03; vport := 3 + filter ethDst = 00:00:00:00:01:01; vport := 1 +
  filter ethDst = 00:00:00:00:02:02; vport := 2 + filter ethDst = 00:00:00:00:00:00; vport := 0);
 (filter vswitch = 1 and vport = 3; filter switch = 3 and port = 1; (vswitch := 1; vport := 3) +
  filter vswitch = 1 and vport = 3; filter switch = 2 and port = 1;
  (port := 2; (2@2 => 0@3; (port := 4; (0@4 => 3@2; port := 1)))); (vswitch := 1; vport := 3) +
  filter vswitch = 1 and vport = 3; filter switch = 1 and port = 1;
  (port := 2; (1@2 => 0@2; (port := 4; (0@4 => 3@2; port := 1)))); (vswitch := 1; vport := 3) +
  filter vswitch = 1 and vport = 3; filter switch = 0 and port = 1; (port := 4; (0@4 => 3@2; port := 1));
  (vswitch := 1; vport := 3) +
  filter vswitch = 1 and vport = 2; filter switch = 3 and port = 1;
  (port := 2; (3@2 => 0@4; (port := 3; (0@3 => 2@2; port := 1)))); (vswitch := 1; vport := 2) +
  filter vswitch = 1 and vport = 2; filter switch = 2 and port = 1; (vswitch := 1; vport := 2) +
  filter vswitch = 1 and vport = 2; filter switch = 1 and port = 1; (port := 3; (1@3 => 2@3; port := 1));
  (vswitch := 1; vport := 2) +
  filter vswitch = 1 and vport = 2; filter switch = 0 and port = 1; (port := 3; (0@3 => 2@2; port := 1));
  (vswitch := 1; vport := 2) +
  filter vswitch = 1 and vport = 1; filter switch = 3 and port = 1;
  (port := 2; (3@2 => 0@4; (port := 2; (0@2 => 1@2; port := 1)))); (vswitch := 1; vport := 1) +
  filter vswitch = 1 and vport = 1; filter switch = 2 and port = 1; (port := 3; (2@3 => 1@3; port := 1));
  (vswitch := 1; vport := 1) +
  filter vswitch = 1 and vport = 1; filter switch = 1 and port = 1; (vswitch := 1; vport := 1) +
  filter vswitch = 1 and vport = 1; filter switch = 0 and port = 1; (port := 2; (0@2 => 1@2; port := 1));
  (vswitch := 1; vport := 1) +
  filter vswitch = 1 and vport = 0; filter switch = 3 and port = 1; (port := 2; (3@2 => 0@4; port := 1));
  (vswitch := 1; vport := 0) +
  filter vswitch = 1 and vport = 0; filter switch = 2 and port = 1; (port := 2; (2@2 => 0@3; port := 1));
  (vswitch := 1; vport := 0) +
  filter vswitch = 1 and vport = 0; filter switch = 1 and port = 1; (port := 2; (1@2 => 0@2; port := 1));
  (vswitch := 1; vport := 0) +
  filter vswitch = 1 and vport = 0; filter switch = 0 and port = 1; (vswitch := 1; vport := 0)));
filter (vswitch = 1 and vport = 3 or vswitch = 1 and vport = 1 or vswitch = 1 and vport = 2 or
        vswitch = 1 and vport = 0) and
       (switch = 3 and port = 1 or switch = 1 and port = 1 or switch = 2 and port = 1 or switch = 0 and port = 1)